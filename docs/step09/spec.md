# ðŸ“„ Step 9 è¦æ ¼æ›¸ï¼ˆè£å‚™ç³»ï¼šæ”¾ç½®ç³» / Tiktokãƒ»BTCãƒ»DOGEï¼‰

## 1. éšŽæ®µç›®æ¨™
- åœ¨ã€Œè£å‚™ã€é æ–°å¢ž **Tab åˆ†æµ**ï¼š`é»žæ“Š` / `æ”¾ç½®`ï¼Œæœ¬éšŽæ®µå¯¦ä½œ **æ”¾ç½®ç³»**ã€‚
- æ–°å¢ž 3 ä»¶æ”¾ç½®è£å‚™ï¼š**Youtube / BTC / DOGE**ï¼Œä¸¦ä¾è§£éŽ–æ¢ä»¶é€æ­¥é–‹å•Ÿã€‚
- ä»¥è³‡æ–™é©…å‹•æ–¹å¼å®šç¾© **ç­‰ç´š 1~10** çš„å‡ç´šæˆæœ¬èˆ‡ã€Œè¢«å‹•è¿·å› æ”¶å…¥ï¼ˆ/sï¼‰ã€ã€‚
- å‡ç´šå¾Œç«‹å³å½±éŸ¿ `idle_per_sec`ï¼ˆåƒ…å‰å°ç´¯ç©ï¼Œæ‰¿æŽ¥ Step 8ï¼‰ã€‚
- UI æ¸…æ¥šé¡¯ç¤ºï¼šåç¨± / ç­‰ç´š / ç•¶å‰åŠ æˆ / ä¸‹ä¸€ç´šåŠ æˆ / å‡ç´šæ¶ˆè€— / éŽ–å®šæ¢ä»¶ã€‚

---

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 Tab åˆ†æµ
- å…¥å£ï¼š**è£å‚™**é ï¼ˆStep 7 å·²å»ºç«‹ï¼‰ã€‚
- æ–¼è£å‚™é ä¸Šæ–¹åŠ å…¥ **Tab**ï¼š
  - `é»žæ“Š`ï¼ˆç¶­æŒæ—¢æœ‰é»žæ“Šç³»è£å‚™æ¸…å–®ï¼‰
  - `æ”¾ç½®`ï¼ˆæœ¬éšŽæ®µæ–°æ¸…å–®ï¼‰
- Tab åˆ‡æ›éœ€ä¿ç•™å„è‡ªæ²å‹•ä½ç½®èˆ‡å±•é–‹ç‹€æ…‹ã€‚

### 2.2 æ”¾ç½®è£å‚™è³‡æ–™ï¼ˆè³‡æ–™é©…å‹•ï¼‰
- æª”æ¡ˆï¼š`assets/config/equipments.json`ï¼ˆèˆ‡é»žæ“Šç³»å…±ç”¨æª”ï¼‰
- çµæ§‹ï¼ˆç¯€éŒ„æ”¾ç½®ç³»ï¼‰ï¼š
  ```json
  {
    "idle_equipments": [
      {
        "id": "youtube",
        "icon": "assets/images/equipment/Youtube.png",
        "name_key": "equip.youtube.name",
        "desc_key": "equip.youtube.desc",
        "type": "idle",
        "unlock": null,
        "max_level": 10,
        "levels": [
          { "level": 1,  "cost": 10,  "bonus_per_sec": 0.1 },
          { "level": 2,  "cost": 20,  "bonus_per_sec": 0.2 },
          { "level": 3,  "cost": 30,  "bonus_per_sec": 0.3 },
          { "level": 4,  "cost": 50,  "bonus_per_sec": 0.4 },
          { "level": 5,  "cost": 80,  "bonus_per_sec": 0.5 },
          { "level": 6,  "cost": 130, "bonus_per_sec": 0.6 },
          { "level": 7,  "cost": 210, "bonus_per_sec": 0.7 },
          { "level": 8,  "cost": 340, "bonus_per_sec": 0.8 },
          { "level": 9,  "cost": 550, "bonus_per_sec": 0.9 },
          { "level": 10, "cost": 890, "bonus_per_sec": 1.0 }
        ]
      },
      {
        "id": "btc",
        "icon": "assets/images/equipment/BTC.png",
        "name_key": "equip.btc.name",
        "desc_key": "equip.btc.desc",
        "type": "idle",
        "unlock": { "type": "equip_level", "id": "youtube", "level": 3 },
        "max_level": 10,
        "levels": [ /* åŒä¸Šæˆæœ¬è¡¨èˆ‡ 0.1~1.0 */ ]
      },
      {
        "id": "doge",
        "icon": "assets/images/equipment/DOGE.png",
        "name_key": "equip.doge.name",
        "desc_key": "equip.doge.desc",
        "type": "idle",
        "unlock": { "type": "equip_level", "id": "btc", "level": 3 },
        "max_level": 10,
        "levels": [ /* åŒä¸Šæˆæœ¬è¡¨èˆ‡ 0.1~1.0 */ ]
      }
    ]
  }
````

### 2.3 å¤šåœ‹èªžç³»ï¼ˆæœ€å°‘éµï¼‰

* `assets/lang/{en,zh,jp,ko}.json`ï¼š

  ```json
  {
    "equip.youtube.name": {"en":"YouTube","zh":"Youtube","jp":"YouTube","ko":"í‹±í†¡"},
    "equip.youtube.desc": {"en":"Generates idle meme energy.","zh":"ç”¢ç”Ÿè¢«å‹•è¿·å› èƒ½é‡ã€‚","jp":"æ”¾ç½®ãƒŸãƒ¼ãƒ ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç”Ÿæˆã€‚","ko":"ë°©ì¹˜ ë¯¸ë¯¹ ì—ë„ˆì§€ë¥¼ ìƒì„±."},
    "equip.btc.name": {"en":"BTC","zh":"BTC","jp":"BTC","ko":"BTC"},
    "equip.btc.desc": {"en":"Stacks crypto clout for idle gain.","zh":"å¹£åœˆç†±åº¦åŠ æŒï¼Œæ”¾ç½®æ”¶ç›Šæé«˜ã€‚","jp":"ä»®æƒ³é€šè²¨ã®å‹¢ã„ã§æ”¾ç½®åŽç›ŠUPã€‚","ko":"ì½”ì¸ ì—´ê¸°ë¡œ ë°©ì¹˜ ìˆ˜ìµ UP."},
    "equip.doge.name": {"en":"DOGE","zh":"DOGE","jp":"DOGE","ko":"DOGE"},
    "equip.doge.desc": {"en":"Such idle, much wow.","zh":"å¦‚æ­¤æ”¾ç½®ï¼Œéžå¸¸å“‡ã€‚","jp":"ãã‚“ãªæ”¾ç½®ã€ã™ã”ã„ãƒ¯ã‚ªã€‚","ko":"ì´ëŸ° ë°©ì¹˜, ëŒ€ë‹¨ Wow."},
    "equip.lock.need_level": {
      "en":"Unlock after {name} Lv.{level}",
      "zh":"éœ€è¦ {name} é”åˆ° Lv.{level} è§£éŽ–",
      "jp":"{name} ã‚’ Lv.{level} ã§è§£æ”¾",
      "ko":"{name} Lv.{level} ë‹¬ì„± ì‹œ í•´ì œ"
    },
    "tab.equip.tap": {"en":"Tap","zh":"é»žæ“Š","jp":"ã‚¿ãƒƒãƒ—","ko":"íƒ­"},
    "tab.equip.idle": {"en":"Idle","zh":"æ”¾ç½®","jp":"æ”¾ç½®","ko":"ë°©ì¹˜"}
  }
  ```

### 2.4 UI èˆ‡äº’å‹•

* **å¡ç‰‡è³‡è¨Š**ï¼šiconã€åç¨±(i18n)ã€`Lv.x/10`ã€ç•¶å‰åŠ æˆ `+y/s`ã€ä¸‹ä¸€ç´š `â†’ +y2/s`ï¼ˆæœªæ»¿ç´šæ™‚ï¼‰ã€å‡ç´šæ¶ˆè€— `cost`ã€ç‹€æ…‹ï¼ˆå¯å‡ç´š/è³‡æºä¸è¶³/æ»¿ç´š/éŽ–å®šï¼‰ã€‚
* **éŽ–å®šé¡¯ç¤º**ï¼š

  * è¢«éŽ–å®šè£å‚™ç½®ç°ã€é¡¯ç¤ºéŽ–é ­ç–Šåœ–æˆ–æ–‡æ¡ˆ `éœ€è¦ Youtube é”åˆ° Lv.3 è§£éŽ–`ï¼ˆi18nï¼‰ã€‚
  * é»žæ“ŠéŽ–å®šå¡ç‰‡æ™‚å½ˆå‡ºåŒæ–‡æ¡ˆï¼Œç„¡å‡ç´šæŒ‰éˆ•ã€‚
* **å‡ç´šæŒ‰éˆ•**ï¼š

  * å¯å‡ç´šï¼š`memePoints >= cost` ä¸” `level < max_level` ä¸” `å·²è§£éŽ–`ã€‚
  * ä¸å¯å‡ç´šï¼šé¡¯ç¤ºç°éšŽä¸¦æç¤ºåŽŸå› ï¼ˆè³‡æºä¸è¶³ / å·²æ»¿ç´š / æœªè§£éŽ–ï¼‰ã€‚
  * å‹•æ•ˆæ²¿ç”¨ Step 4 å£“æ„Ÿï¼ˆX1.08/Y0.98, 0.12sï¼‰ã€‚
* **å³æ™‚åˆ·æ–°**ï¼šå‡ç´šå¾Œå¡ç‰‡ã€å³ä¸Š `memePoints`ã€èˆ‡æ”¾ç½®é€ŸçŽ‡å±•ç¤º `+X/s` ç«‹å³æ›´æ–°ã€‚

### 2.5 æ•¸å€¼è¨ˆç®—

* æ”¾ç½®é€ŸçŽ‡å…¬å¼ï¼ˆåœ¨ Step 8 çš„ `idle_per_sec` ä¸­æ•´åˆï¼‰ï¼š

  ```
  idle_per_sec =
      idle.base_per_sec * idle.multiplier
    + Î£(levelBonus_per_sec for all idle_equipments)
    + å…¶ä»–ä¾†æºï¼ˆå¯µç‰©/BUFF/æ´»å‹•ï¼Œæœªå¯¦è£æ™‚=0ï¼‰
  ```
* æœ¬éšŽæ®µ `levelBonus_per_sec` ç›´æŽ¥å–è£å‚™ç­‰ç´šå°æ‡‰ `bonus_per_sec`ï¼›ç‚º\*\*ç–ŠåŠ ï¼ˆç›¸åŠ ï¼‰\*\*é—œä¿‚ã€‚
* å‡ç´šæµç¨‹ï¼š

  1. æª¢æŸ¥è§£éŽ–æ¢ä»¶ã€‚
  2. æª¢æŸ¥ç­‰ç´šä¸Šé™èˆ‡è³‡æºã€‚
  3. æ‰£ `memePoints` â†’ `level += 1`ã€‚
  4. é‡æ–°è¨ˆç®—ä¸¦æ›´æ–° `idle_per_sec`ã€‚
  5. UI æ›´æ–°ï¼ˆåŠ æˆ/ä¸‹ä¸€ç´š/è³‡æº/`+X/s`ï¼‰ã€‚

### 2.6 å­˜æª”çµæ§‹ï¼ˆæ²¿ç”¨ Step 2ï¼‰

* åœ¨ Blob çš„ `equipments` å…§åŠ å…¥æ¯ä»¶è£å‚™ç­‰ç´šï¼ˆåˆå§‹ 0ï¼‰ï¼š

  ```json
  {
    "equipments": {
      "youtube": 0,
      "btc": 0,
      "doge": 0,
      "...": 0
    }
  }
  ```
* è®€æª”æ™‚ä¾ç­‰ç´šå¥—ç”¨åŠ æˆï¼›å¯«æª”æ–¼å‡ç´šæˆåŠŸå¾ŒåŽŸå­æ›´æ–°ã€‚

### 2.7 Debug é¢æ¿

* é¡¯ç¤ºï¼š`idle.base_per_sec`ã€`Î£idleEquipBonus/s`ã€`idle_per_sec(effective)`ã€å„è£å‚™ç­‰ç´šèˆ‡ä¸‹ä¸€ç´šæˆæœ¬ã€‚
* å¿«æ·ï¼š`çµ¦è³‡æº+1000`ã€`ä¸€éµè§£éŽ–æ¢ä»¶`ï¼ˆåƒ… Debugï¼‰ã€‚

---

## 3. é©—æ”¶æ¨™æº–

* âœ… **Tab åˆ†æµ**ï¼šè£å‚™é å¯åœ¨ `é»žæ“Š/æ”¾ç½®` å…©å€‹ Tab ä¾†å›žåˆ‡æ›ï¼Œç‹€æ…‹èˆ‡æ²å‹•ä¸äº’ç›¸å¹²æ“¾ã€‚
* âœ… **è§£éŽ–é‚è¼¯**ï¼š

  * BTC åœ¨ Youtube æœªé” Lv.3 æ™‚é¡¯ç¤ºéŽ–å®šæ–‡æ¡ˆï¼›Tiktok å‡è‡³ Lv.3 å¾Œï¼ŒBTC ç«‹å³è§£éŽ–ã€‚
  * DOGE åœ¨ BTC æœªé” Lv.3 æ™‚éŽ–å®šï¼›BTC å‡è‡³ Lv.3 å¾Œï¼ŒDOGE ç«‹å³è§£éŽ–ã€‚
* âœ… **å‡ç´šèˆ‡è¨ˆç®—**ï¼šå‡ç´šä»»ä¸€æ”¾ç½®è£å‚™ä¹‹å¾Œï¼Œ`idle_per_sec` ç«‹å³å¢žåŠ å…¶å°æ‡‰ `bonus_per_sec`ã€‚
* âœ… **30 ç§’é©—è­‰**ï¼šå‡ç´šå‰å¾Œå„åœ¨å‰å°éœç½® 30 ç§’ï¼Œå¾Œè€…çš„è³‡æºç´¯ç©æ˜Žé¡¯é«˜æ–¼å‰è€…ï¼Œä¸”èˆ‡ `30 Ã— idle_per_sec` çš„ç†è«–å€¼èª¤å·® â‰¤ 1%ã€‚
* âœ… **UI å®Œæ•´**ï¼šå¡ç‰‡æ¸…æ¥šå±•ç¤ºåç¨±ã€ç­‰ç´šã€ç•¶å‰/ä¸‹ä¸€ç´šåŠ æˆã€æˆæœ¬èˆ‡ç‹€æ…‹ï¼›è³‡æºä¸è¶³æ™‚æŒ‰éˆ•ç¦ç”¨ï¼›æ»¿ç´šé¡¯ç¤º MAXã€‚
* âœ… **æŒä¹…åŒ–**ï¼šé‡å•Ÿ App å¾Œï¼Œè£å‚™ç­‰ç´šèˆ‡ `idle_per_sec` è¨ˆç®—çµæžœä¸€è‡´æ¢å¾©ã€‚

---

## 4. å¯¦ä¾‹åŒ–éœ€æ±‚æ¸¬è©¦æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šTiktok å‡ç´šå½±éŸ¿æ”¾ç½®é€ŸçŽ‡

* **Given** `idle.base_per_sec=0.0`ã€`youtube.level=0`
* **When** ä¾åºå‡åˆ° Lv.3ï¼ˆæˆæœ¬ 10+20+30ï¼‰ï¼Œç´¯è¨ˆ `bonus_per_sec=0.6`
* **Then** Debug `idle_per_sec` é¡¯ç¤º `0.6/s`ï¼›å‰å° 10 ç§’å¾Œè³‡æº â‰ˆ `6.0 Â± 0.06`

---

### æ¡ˆä¾‹ 2ï¼šBTC éŽ–å®šèˆ‡è§£éŽ–

* **Given** `youtube.level=2`ã€`btc.level=0`
* **When** æ‰“é–‹æ”¾ç½® Tab
* **Then** BTC å¡ç‰‡é¡¯ç¤ºéŽ–å®šèˆ‡æ–‡æ¡ˆã€Œéœ€è¦ Youtube é”åˆ° Lv.3 è§£éŽ–ã€
* **When** å‡ Youtube è‡³ Lv.3 å¾Œè¿”å›žæ”¾ç½® Tab
* **Then** BTC è§£é™¤éŽ–å®šã€å¯å‡ç´š

---

### æ¡ˆä¾‹ 3ï¼šDOGE éŽ–å®šéˆ

* **Given** `btc.level=2`ã€`doge.level=0`
* **When** æ‰“é–‹æ”¾ç½® Tab
* **Then** DOGE é¡¯ç¤ºéŽ–å®šã€Œéœ€è¦ BTC é”åˆ° Lv.3 è§£éŽ–ã€
* **When** å‡ BTC è‡³ Lv.3
* **Then** DOGE å³æ™‚è§£éŽ–

---

### æ¡ˆä¾‹ 4ï¼šå‡ç´šæ‰£è²»èˆ‡ä¸Šé™

* **Given** `memePoints=50`ã€`youtube.level=1`ï¼ˆä¸‹ä¸€ç´šæˆæœ¬ 20ï¼‰
* **When** é€£å‡å…©ç´šï¼ˆLv.1â†’Lv.3ï¼š20 + 30ï¼‰
* **Then** `memePoints=0`ï¼Œç¬¬ä¸‰æ¬¡å‡ç´šæŒ‰éˆ•ç°éšŽï¼ˆè³‡æºä¸è¶³ï¼‰ï¼›`idle_per_sec` ç´¯åŠ  0.2+0.3

---

### æ¡ˆä¾‹ 5ï¼š30 ç§’æ”¶ç›Šæå‡é©—è­‰

* **Given** åˆå§‹ `idle_per_sec=0.6`ï¼ˆTiktok Lv.3ï¼‰ï¼Œå‰å°ç­‰ 30 ç§’è¨˜éŒ„ A
* **When** å‡ BTC Lv.2ï¼ˆ+0.3/sï¼‰ï¼Œæ–° `idle_per_sec=0.9`
* **Then** å†ç­‰ 30 ç§’è¨˜éŒ„ Bï¼›`B - A â‰ˆ (0.9 - 0.6) * 30 = 9 Â± 0.09`

---

### æ¡ˆä¾‹ 6ï¼šæŒä¹…åŒ–é©—è­‰

* **Given** Youtube Lv.4ã€BTC Lv.3ã€DOGE Lv.0
* **When** é—œé–‰ä¸¦é‡å•Ÿ App
* **Then** è£å‚™ç­‰ç´šæ­£ç¢ºã€æ”¾ç½®é€ŸçŽ‡é¡¯ç¤º `0.4 + 0.3 = 0.7/s`ï¼ˆè‹¥ base=0ï¼‰ï¼Œèˆ‡å¯¦éš›ç´¯ç©ç›¸ç¬¦

---

### æ¡ˆä¾‹ 7ï¼šå¤šåœ‹èªžç³»

* **Given** ç•¶å‰èªžè¨€ç‚º ZH
* **When** åˆ‡æ› EN / JP / KO
* **Then** å¡ç‰‡åç¨±èˆ‡éŽ–å®šæ–‡æ¡ˆå³æ™‚åˆ‡æ›å°æ‡‰èªžç³»ï¼Œä¸éœ€é‡å•Ÿ

---

## 5. é™åˆ¶èˆ‡å‚™è¨»

* æ‰€æœ‰æˆæœ¬èˆ‡åŠ æˆ **ä¸å¾—ç¡¬ç·¨**ï¼Œéœ€ä¾†è‡ª `equipments.json`ï¼›å¾ŒçºŒæ–°å¢žè£å‚™åªè¦æ“´å…… JSON å³å¯ã€‚
* è§£éŽ–æ¢ä»¶ä»¥è³‡æ–™å®£å‘Šï¼ˆ`unlock`ï¼‰ï¼Œç¨‹å¼ä»¥æ³›åž‹è¦å‰‡è§£æžï¼ˆ`equip_level`ï¼‰ï¼Œä¾¿æ–¼æœªä¾†æ“´å……ã€‚
* `idle_per_sec` èˆ‡ Step 8 çš„æ›´æ–°ç®¡ç·šä¸€è‡´ï¼›åªæ”¹è®Šã€Œé€ŸçŽ‡è¼¸å…¥ã€ï¼Œä¸è®Šæ›´ç´¯ç©æ©Ÿåˆ¶ã€‚
* å‡ç´šæµç¨‹éœ€èˆ‡å­˜æª”å¯«å…¥**åŽŸå­**ä¸€è‡´ï¼šæ‰£è²»æˆåŠŸâ†’å‡ç´šâ†’é‡ç®—â†’å¯«æª”ï¼›ä»»ä½•ä¸€æ­¥å¤±æ•—éœ€å›žæ»¾ã€‚
* UI é©é…çª„èž¢å¹•ï¼šå¡ç‰‡å…è¨±æ›è¡Œï¼›icon æœ€å° 64pxï¼›éŽ–å®šæç¤ºå„ªå…ˆåªé¡¯ç¤ºä¸€è¡Œï¼ˆé•·æ–‡åŠ  `â€¦`ï¼‰ã€‚
