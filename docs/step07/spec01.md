# ðŸ“„ Step 7 è¦æ ¼æ›¸ï¼ˆè£å‚™ç³»çµ±ï¼šé»žæ“Šç³» / RGB é›»ç«¶éµç›¤ï¼‰

## 1. éšŽæ®µç›®æ¨™
- å»ºç«‹ã€Œè£å‚™æ¸…å–® UIã€ï¼ˆåç¨± / ç­‰ç´š / åŠ æˆ / å‡ç´šæ¶ˆè€— / å¯å‡ç´šç‹€æ…‹ï¼‰ã€‚
- å¯¦ä½œ **é»žæ“ŠåŠ æˆè£å‚™** è¨ˆç®—ï¼š`tap_gain = base + (Î£è£å‚™åŠ æˆ)`ã€‚
- å…ˆä¸Šç·š 1 ä»¶è£å‚™ï¼š**RGB é›»ç«¶éµç›¤**ï¼ˆå¤šåœ‹èªžç³»ã€å¯å‡ç´š 1~10 ç´šï¼‰ã€‚
- å‡ç´šæ¶ˆè€—èˆ‡åŠ æˆå›ºå®šè¡¨ï¼ˆè¦‹ä¸‹ï¼‰ï¼Œæ‰£è²»æ­£ç¢ºã€è¶…å‡ºç­‰ç´šä¸Šé™æ™‚ç¦ç”¨ã€‚

---

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 è£å‚™è³‡æ–™ï¼ˆè³‡æ–™é©…å‹•ï¼‰
- æª”æ¡ˆï¼š`assets/config/equipments.json`
- çµæ§‹ï¼ˆç¯„ä¾‹ï¼Œåƒ…é»žæ“Šç³»ï¼‰ï¼š
  ```json
  {
    "tap_equipments": [
      {
        "id": "rgb_keyboard",
        "icon": "assets/images/equipment/RGBKeyboard.png",
        "name_key": "equip.rgb_keyboard.name",
        "desc_key": "equip.rgb_keyboard.desc",
        "type": "tap", 
        "max_level": 10,
        "levels": [
          { "level": 1,  "cost": 10,  "bonus": 1 },
          { "level": 2,  "cost": 20,  "bonus": 2 },
          { "level": 3,  "cost": 30,  "bonus": 3 },
          { "level": 4,  "cost": 50,  "bonus": 4 },
          { "level": 5,  "cost": 80,  "bonus": 5 },
          { "level": 6,  "cost": 130, "bonus": 6 },
          { "level": 7,  "cost": 210, "bonus": 7 },
          { "level": 8,  "cost": 340, "bonus": 8 },
          { "level": 9,  "cost": 550, "bonus": 9 },
          { "level": 10, "cost": 890, "bonus": 10 }
        ]
      }
    ]
  }
  ```

* å¤šåœ‹èªžç³»ï¼ˆæ–°å¢žè‡³ `assets/lang/{en,zh,jp,ko}.json`ï¼‰ï¼š

  ```json
  {
    "equip.rgb_keyboard.name": {
      "en": "RGB Gaming Keyboard",
      "zh": "RGB é›»ç«¶éµç›¤",
      "jp": "RGBã‚²ãƒ¼ãƒŸãƒ³ã‚°ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰",
      "ko": "RGB ê²Œì´ë° í‚¤ë³´ë“œ"
    },
    "equip.rgb_keyboard.desc": {
      "en": "Add tap power with a dazzling keyboard.",
      "zh": "çµ¢çˆ›éµç›¤è®“ä½ çš„é»žæ“Šæ›´æœ‰åŠ›ï¼",
      "jp": "ã¾ã°ã‚†ã„ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã‚¿ãƒƒãƒ—åŠ›ã‚¢ãƒƒãƒ—ï¼",
      "ko": "í™”ë ¤í•œ í‚¤ë³´ë“œë¡œ íƒ­ íŒŒì›Œ ì—…!"
    }
  }
  ```

### 2.2 UI èˆ‡äº’å‹•

* å…¥å£ï¼šä¸»ç•«é¢**ä¸‹æ–¹å°Žèˆª â†’ è£å‚™**ï¼ˆå·²æ–¼ Step 4ï¼‰ã€‚
* è£å‚™æ¸…å–®ï¼ˆæœ¬éšŽæ®µåƒ… 1 ä»¶ï¼Œä½† UI ä»¥æ¸…å–®å‘ˆç¾ï¼Œé ç•™æ“´å……ï¼‰ï¼š

  * å¡ç‰‡å…ƒç´ ï¼šicon / åç¨±(i18n) / ç­‰ç´š `Lv.x / 10` / ç•¶å‰åŠ æˆ `+x` / ä¸‹ä¸€ç´šåŠ æˆ `â†’ +y`ï¼ˆè‹¥æœªæ»¿ç´šï¼‰ / å‡ç´šæ¶ˆè€— `cost`ã€‚
  * å‡ç´šæŒ‰éˆ•ï¼š

    * **å¯å‡ç´š**ï¼šç•¶ `memePoints >= nextLevel.cost` ä¸” `currentLevel < max_level`ã€‚
    * **ä¸å¯å‡ç´š**ï¼šé¡¯ç¤ºç°éšŽä¸¦é™„æç¤ºï¼ˆè³‡æºä¸è¶³æˆ–å·²é”ä¸Šé™ï¼‰ã€‚
  * äº’å‹•å‹•æ•ˆï¼šæŒ‰éˆ•é»žæ“Šä½¿ç”¨ Step 4 çš„å£“æ„Ÿå‹•ç•«ï¼ˆX1.08/Y0.98ï¼Œ0.12sï¼‰ã€‚
* å³ä¸Šè§’é¡¯ç¤ºç•¶å‰è³‡æº `memePoints`ï¼ˆå³æ™‚åˆ·æ–°ï¼‰ã€‚

### 2.3 æ•¸å€¼è¦å‰‡

* å–®ä»¶è£å‚™ **æ¯ç´šåŠ æˆ = ç­‰ç´šå°æ‡‰çš„ `bonus`**ï¼ˆè¦‹è¡¨ï¼‰ã€‚
* é»žæ“Šæ”¶ç›Šå…¬å¼ï¼ˆèˆ‡ Step 5 ä¸²æŽ¥ï¼‰ï¼š

  * `tap_gain = base + sum(all tap_equipments bonuses)`
  * `base` ä¾†è‡ª `assets/config/game.json` çš„ `tap.base`ï¼ˆä¾‹å¦‚ 1ï¼‰ã€‚
* å‡ç´šæ™‚æµç¨‹ï¼š

  1. è®€å–ç•¶å‰ `memePoints` èˆ‡ `currentLevel`ã€‚
  2. è‹¥ `currentLevel == max_level` â†’ ç¦ç”¨ï¼›æç¤ºå·²æ»¿ç´šã€‚
  3. å–å¾— `nextLevel.cost`ï¼›è‹¥ `memePoints < cost` â†’ ç¦ç”¨ï¼›æç¤ºè³‡æºä¸è¶³ã€‚
  4. æ‰£é™¤ `cost` â†’ `memePoints -= cost`ï¼ˆä¸å¯ç‚ºè² ï¼Œå¤±æ•—å³å›žæ»¾ï¼‰ã€‚
  5. `currentLevel += 1`ï¼›å³æ™‚è¨ˆç®—ä¸¦æ›´æ–° `tap_gain`ã€‚
  6. UI å³æ™‚æ›´æ–°ï¼ˆç­‰ç´šã€åŠ æˆã€ä¸‹ä¸€ç´šæ¶ˆè€—ã€è³‡æºï¼‰ã€‚
* ä»»ä½•è¨ˆç®—éƒ½ä»¥**æ•´æ•¸**æˆæœ¬ã€**æ•´æ•¸**åŠ æˆè™•ç†ï¼›`tap_gain` å¯ç‚ºæ•´æ•¸æˆ–æµ®é»žï¼ˆåŸºç¤Žå€¼å¯èƒ½éžæ•´æ•¸ï¼‰ã€‚

### 2.4 å­˜æª”èˆ‡æ¢å¾©ï¼ˆæ²¿ç”¨ Step 2ï¼‰

* `SecureSaveService` çš„ `equipments` çµæ§‹æ–°å¢žï¼š

  ```json
  {
    "equipments": {
      "rgb_keyboard": 0  // åˆå§‹ 0 ç­‰ï¼ˆå°šæœªè³¼è²·/å‡ç´šï¼‰
    }
  }
  ```
* è¼‰å…¥æ™‚å°‡æ­¤ç­‰ç´šå¥—å…¥è¨ˆç®—ç¸½åŠ æˆã€‚

### 2.5 Debug é¢æ¿

* é¡¯ç¤ºï¼š`tap.base`ã€`sumTapBonus`ã€`tap_gain`ã€`rgb_keyboard.level`ã€`rgb_keyboard.nextCost`ã€‚
* æä¾›ã€Œ+è³‡æº100ã€æ¸¬è©¦æŒ‰éˆ•ï¼ˆåƒ… Debugï¼‰ä»¥é©—è­‰å‡ç´šæµç¨‹ã€‚

### 2.6 è³‡ç”¢

* åœ–ç¤ºï¼š`assets/images/equipment/RGBKeyboard.png`ï¼ˆé è¼‰ï¼‰ã€‚
* è‹¥ç¼ºåœ–ï¼šä»¥ç°æ¡†ä½”ä½ä¸¦è¨˜éŒ„ console è­¦å‘Šã€‚

---

## 3. é©—æ”¶æ¨™æº–

* âœ… **æ•¸å€¼å³æ™‚æ€§**ï¼šå‡ç´šå¾Œï¼Œå†æ¬¡å–®æ“Šè§’è‰²ä¹‹æœ‰æ•ˆé»žæ“Šï¼Œ`tap_gain` ç«‹å³åæ˜ æ›´é«˜ï¼ˆ`base + Î£bonus`ï¼‰ã€‚
* âœ… **æ‰£è²»æ­£ç¢º**ï¼šå‡ç´šæ‰£é™¤å°æ‡‰ `cost`ï¼Œ`memePoints` ä¸å¾—ç‚ºè² ï¼›è³‡æºä¸è¶³æ™‚æŒ‰éˆ•ç¦ç”¨ã€‚
* âœ… **ç­‰ç´šé‚è¼¯**ï¼šç­‰ç´šä¸Šé™ 10ï¼›åˆ°é” 10 å¾Œå‡ç´šæŒ‰éˆ•é¡¯ç¤ºå·²æ»¿ç´šä¸”ä¸å¯é»žã€‚
* âœ… **UI å®Œæ•´**ï¼šå¡ç‰‡æ¸…æ¥šé¡¯ç¤ºåç¨±(i18n)ã€ç­‰ç´šã€ç•¶å‰åŠ æˆã€ä¸‹ä¸€ç´šåŠ æˆèˆ‡æ¶ˆè€—ã€æŒ‰éˆ•ç‹€æ…‹ã€‚
* âœ… **æŒä¹…åŒ–**ï¼šé—œé–‰é‡é–‹ Appï¼Œè£å‚™ç­‰ç´šã€`memePoints` æ­£ç¢ºæ¢å¾©ï¼›`tap_gain` è¨ˆç®—æ­£ç¢ºã€‚

---

## 4. å¯¦ä¾‹åŒ–éœ€æ±‚æ¸¬è©¦æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šé¦–æ¬¡å‡ç´šæˆåŠŸ

* **Given** `memePoints=15`ã€`rgb_keyboard.level=0`ã€`tap.base=1`
* **When** é»žæ“Šã€Œå‡ç´šã€
* **Then** `memePoints=5`ã€`rgb_keyboard.level=1`ã€`sumTapBonus=1`ã€`tap_gain=1+1=2`

---

### æ¡ˆä¾‹ 2ï¼šé€£çºŒå‡ç´šè‡³ Lv.3

* **Given** `memePoints=100`ã€`rgb_keyboard.level=0`ã€æˆæœ¬è¡¨ï¼ˆ10,20,30ï¼‰
* **When** é€£çºŒå‡åˆ° Lv.3
* **Then** æœ€çµ‚ `memePoints = 100 - (10+20+30) = 40`ã€`sumTapBonus=1+2+3=6`ã€`tap_gain=base+6`

---

### æ¡ˆä¾‹ 3ï¼šè³‡æºä¸è¶³ç¦ç”¨

* **Given** `memePoints=19`ã€ç•¶å‰ Lv.1 â†’ ä¸‹ä¸€ç´šæˆæœ¬ 20
* **When** é–‹å•Ÿè£å‚™é 
* **Then** å‡ç´šæŒ‰éˆ•é¡¯ç¤ºç°éšŽï¼ˆä¸å¯é»žï¼‰ï¼Œæç¤ºã€Œè³‡æºä¸è¶³ã€

---

### æ¡ˆä¾‹ 4ï¼šæ»¿ç´šç‹€æ…‹

* **Given** `rgb_keyboard.level=10`
* **When** é€²å…¥è£å‚™é 
* **Then** é¡¯ç¤º `Lv.10/10`ã€`ä¸‹ä¸€ç´š`æ¬„ä½éš±è—æˆ–æ¨™è¨˜ã€ŒMAXã€ï¼ŒæŒ‰éˆ•ç¦ç”¨

---

### æ¡ˆä¾‹ 5ï¼šé»žæ“Šæ”¶ç›Šå³æ™‚æ›´æ–°

* **Given** `tap.base=1`ã€`rgb_keyboard.level=1`ï¼ˆbonus=1ï¼‰ã€æœ‰æ•ˆé»žæ“Šé–“éš”é€šéŽï¼ˆStep 5ï¼‰
* **When** å…ˆé»žæ“Šä¸€æ¬¡ â†’ æ‡‰å¾— 2ï¼›å‡ç´šåˆ° Lv.2ï¼ˆbonus=2ï¼‰å¾Œå†é»žæ“Šä¸€æ¬¡
* **Then** ç¬¬äºŒæ¬¡é»žæ“Šæ‡‰å¾— 3ï¼ˆ`1 + 2`ï¼‰ï¼Œæ•¸å€¼å³æ™‚åæ˜ 

---

### æ¡ˆä¾‹ 6ï¼šæŒä¹…åŒ–é©—è­‰

* **Given** å·²å‡åˆ° Lv.4ï¼ˆcost ç´¯è¨ˆ 10+20+30+50=110ï¼‰ï¼Œ`memePoints` å·²æ‰£é™¤
* **When** é—œé–‰ä¸¦é‡å•Ÿ App
* **Then** è£å‚™ä»ç‚º Lv.4ï¼›é€²å…¥ä¸»é é»žæ“Šä¸€æ¬¡ï¼Œ`tap_gain = base + (1+2+3+4)=base+10`

---

### æ¡ˆä¾‹ 7ï¼šå¤šåœ‹èªžç³»é¡¯ç¤º

* **Given** ç›®å‰èªžè¨€ç‚º ZH
* **When** åˆ‡æ›åˆ° EN / JP / KO
* **Then** è£å‚™åç¨±èˆ‡æè¿°å³æ™‚åˆ‡æ›å°æ‡‰èªžç³»æ–‡å­—ï¼Œç„¡éœ€é‡å•Ÿ

---

## 5. é™åˆ¶èˆ‡å‚™è¨»

* æ•¸å€¼è¡¨å›ºå®šå¯«æ–¼ `equipments.json`ï¼Œ**ä¸å¾—ç¡¬ç·¨**æ–¼ç¨‹å¼ç¢¼ï¼›å¾ŒçºŒæ”¯æ´å¤šä»¶è£å‚™ç›´æŽ¥æ“´å¢žæ¸…å–®ã€‚
* Tap å…¬å¼èˆ‡ Step 5 çš„å†·å»åˆ¤å®šç›¸å®¹ï¼šåªæœ‰é€šéŽå†·å»çš„ã€Œæœ‰æ•ˆé»žæ“Šã€æ‰å¥—ç”¨ `tap_gain`ã€‚
* å‡ç´šæ‰£è²»èˆ‡ç‹€æ…‹æ›´æ–°éœ€**åŽŸå­åŒ–**è™•ç†ï¼ˆæ‰£è²»æˆåŠŸæ‰å‡ç´šï¼‰ï¼Œå¯«æª”å¤±æ•—éœ€å›žæ»¾ï¼ˆä¾ Step 2 å‚™ä»½ç­–ç•¥ï¼‰ã€‚
* UI é©é…å°èž¢å¹•ï¼šå¡ç‰‡å¯æŠ˜è¡Œé¡¯ç¤ºï¼›icon æœ€å°å¯¬é«˜ 64pxã€‚
* è‹¥æœªè¼‰å…¥åˆ°èªžç³»å­—ä¸²ï¼Œå›žé€€ ENï¼›è‹¥åœ–æª”ç¼ºå¤±ï¼Œé¡¯ç¤ºä½”ä½ç¬¦ä¸¦è¼¸å‡ºè­¦å‘Šã€‚

